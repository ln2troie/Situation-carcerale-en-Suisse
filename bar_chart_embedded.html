<!DOCTYPE html>
<meta charset="utf-8">
<html>

<head>
  <title>Projet de visualisation</title>
</head>

<body>
  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v7.js"></script>

  <div id="divButtons"></div>
  <div style="text-align: center;" id="title"></div>

  <!-- Create a div where the graph will take place -->
  <div style="text-align: center;" id="my_dataviz"></div>

  <script>
    xIndex = 0; //index where the x axis values are in the table. table starts from 0

    var headers = [];

    let datas = 
    [
    {
        "années": "1988",
        "NB_penitentiaires": "152",
        "NB_detention ": "5487",
        "Population_permanente": "6593",
        "NB_places": "83",
        "Effectif": "70",
        "occupation": "84.2",
        "detenus_releve": "4621",
        "detenus_releve_femmes": "292",
        "pourcent": "6.3",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1320",
        "execution_anticipée": "271",
        "exécution": "2833",
        "mesures_contrainte": "60",
        "autres": "115",
        "NB_entrees": "38.8",
        "détention_provisoire": "17.7",
        "exécution_anticipée": "0.6",
        "exécution2": "13.7",
        "mesures": "...",
        "autres_types": "6.8",
        "NB_journees": "1556.7",
        "detention_provisoire2": "442.3",
        "execution_anticipée2": "87.1",
        "exécution des peines et des mesures_5": "990.6",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "36.8"
    },
    {
        "années": "1989",
        "NB_penitentiaires": "154",
        "NB_detention ": "5572",
        "Population_permanente": "6647",
        "NB_places": "84",
        "Effectif": "68",
        "occupation": "81.1",
        "detenus_releve": "4519",
        "detenus_releve_femmes": "261",
        "pourcent": "5.8",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1279",
        "execution_anticipée": "283",
        "exécution": "2824",
        "mesures_contrainte": "33",
        "autres": "100",
        "NB_entrees": "40.8",
        "détention_provisoire": "18",
        "exécution_anticipée": "0.5",
        "exécution2": "14.7",
        "mesures": "...",
        "autres_types": "7.3",
        "NB_journees": "1536",
        "detention_provisoire2": "463.9",
        "execution_anticipée2": "87.2",
        "exécution des peines et des mesures_5": "943.2",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "41.7"
    },
    {
        "années": "1990",
        "NB_penitentiaires": "155",
        "NB_detention ": "5567",
        "Population_permanente": "6712",
        "NB_places": "83",
        "Effectif": "69",
        "occupation": "83.1",
        "detenus_releve": "4625",
        "detenus_releve_femmes": "287",
        "pourcent": "6.2",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1428",
        "execution_anticipée": "286",
        "exécution": "2707",
        "mesures_contrainte": "72",
        "autres": "132",
        "NB_entrees": "51",
        "détention_provisoire": "25.5",
        "exécution_anticipée": "0.7",
        "exécution2": "13.9",
        "mesures": "...",
        "autres_types": "10.9",
        "NB_journees": "1666.2",
        "detention_provisoire2": "560.8",
        "execution_anticipée2": "129.2",
        "exécution des peines et des mesures_5": "919.9",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "56.3"
    },
    {
        "années": "1991",
        "NB_penitentiaires": "157",
        "NB_detention ": "5704",
        "Population_permanente": "6797",
        "NB_places": "84",
        "Effectif": "74",
        "occupation": "88.2",
        "detenus_releve": "5029",
        "detenus_releve_femmes": "315",
        "pourcent": "6.3",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1828",
        "execution_anticipée": "304",
        "exécution": "2702",
        "mesures_contrainte": "81",
        "autres": "114",
        "NB_entrees": "53.5",
        "détention_provisoire": "28.2",
        "exécution_anticipée": "0.6",
        "exécution2": "13.1",
        "mesures": "...",
        "autres_types": "11.5",
        "NB_journees": "1738.2",
        "detention_provisoire2": "636.1",
        "execution_anticipée2": "104.6",
        "exécution des peines et des mesures_5": "934.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "62.7"
    },
    {
        "années": "1992",
        "NB_penitentiaires": "157",
        "NB_detention ": "5658",
        "Population_permanente": "6875",
        "NB_places": "82",
        "Effectif": "73",
        "occupation": "89.9",
        "detenus_releve": "5041",
        "detenus_releve_femmes": "373",
        "pourcent": "7.4",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1838",
        "execution_anticipée": "336",
        "exécution": "2642",
        "mesures_contrainte": "96",
        "autres": "129",
        "NB_entrees": "51.9",
        "détention_provisoire": "21.1",
        "exécution_anticipée": "0.6",
        "exécution2": "13.3",
        "mesures": "...",
        "autres_types": "17",
        "NB_journees": "1800.1",
        "detention_provisoire2": "606.8",
        "execution_anticipée2": "106.5",
        "exécution des peines et des mesures_5": "1011.2",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "75.3"
    },
    {
        "années": "1993",
        "NB_penitentiaires": "158",
        "NB_detention ": "5749",
        "Population_permanente": "6938",
        "NB_places": "83",
        "Effectif": "76",
        "occupation": "92.5",
        "detenus_releve": "5299",
        "detenus_releve_femmes": "345",
        "pourcent": "6.5",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1887",
        "execution_anticipée": "340",
        "exécution": "2820",
        "mesures_contrainte": "100",
        "autres": "152",
        "NB_entrees": "54.5",
        "détention_provisoire": "21",
        "exécution_anticipée": "0.9",
        "exécution2": "13.7",
        "mesures": "...",
        "autres_types": "18.9",
        "NB_journees": "1829",
        "detention_provisoire2": "625.6",
        "execution_anticipée2": "121.9",
        "exécution des peines et des mesures_5": "998.7",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "82.7"
    },
    {
        "années": "1994",
        "NB_penitentiaires": "159",
        "NB_detention ": "5753",
        "Population_permanente": "6994",
        "NB_places": "82",
        "Effectif": "76",
        "occupation": "92.4",
        "detenus_releve": "5313",
        "detenus_releve_femmes": "376",
        "pourcent": "7.1",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1828",
        "execution_anticipée": "390",
        "exécution": "2789",
        "mesures_contrainte": "147",
        "autres": "159",
        "NB_entrees": "49.9",
        "détention_provisoire": "19.4",
        "exécution_anticipée": "0.8",
        "exécution2": "13.3",
        "mesures": "...",
        "autres_types": "16.5",
        "NB_journees": "1819.3",
        "detention_provisoire2": "600.3",
        "execution_anticipée2": "121.3",
        "exécution des peines et des mesures_5": "1011.9",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "86.7"
    },
    {
        "années": "1995",
        "NB_penitentiaires": "164",
        "NB_detention ": "6190",
        "Population_permanente": "7041",
        "NB_places": "88",
        "Effectif": "75",
        "occupation": "85.7",
        "detenus_releve": "5307",
        "detenus_releve_femmes": "358",
        "pourcent": "6.7",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1689",
        "execution_anticipée": "379",
        "exécution": "2764",
        "mesures_contrainte": "387",
        "autres": "88",
        "NB_entrees": "44.8",
        "détention_provisoire": "18.5",
        "exécution_anticipée": "0.8",
        "exécution2": "11.7",
        "mesures": "...",
        "autres_types": "13.7",
        "NB_journees": "1711.6",
        "detention_provisoire2": "500.7",
        "execution_anticipée2": "131.1",
        "exécution des peines et des mesures_5": "967.9",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "111.8"
    },
    {
        "années": "1996",
        "NB_penitentiaires": "163",
        "NB_detention ": "6341",
        "Population_permanente": "7072",
        "NB_places": "90",
        "Effectif": "71",
        "occupation": "79.5",
        "detenus_releve": "5044",
        "detenus_releve_femmes": "316",
        "pourcent": "6.3",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1624",
        "execution_anticipée": "340",
        "exécution": "2740",
        "mesures_contrainte": "180",
        "autres": "160",
        "NB_entrees": "47.4",
        "détention_provisoire": "19.4",
        "exécution_anticipée": "0.6",
        "exécution2": "11.2",
        "mesures": "...",
        "autres_types": "16.3",
        "NB_journees": "1683.5",
        "detention_provisoire2": "532.8",
        "execution_anticipée2": "119.8",
        "exécution des peines et des mesures_5": "928",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "102.9"
    },
    {
        "années": "1997",
        "NB_penitentiaires": "153",
        "NB_detention ": "6468",
        "Population_permanente": "7089",
        "NB_places": "91",
        "Effectif": "75",
        "occupation": "81.9",
        "detenus_releve": "5295",
        "detenus_releve_femmes": "303",
        "pourcent": "5.7",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1769",
        "execution_anticipée": "349",
        "exécution": "2823",
        "mesures_contrainte": "218",
        "autres": "136",
        "NB_entrees": "47.6",
        "détention_provisoire": "19.5",
        "exécution_anticipée": "0.7",
        "exécution2": "10.9",
        "mesures": "...",
        "autres_types": "16.5",
        "NB_journees": "1823.2",
        "detention_provisoire2": "581.5",
        "execution_anticipée2": "131.5",
        "exécution des peines et des mesures_5": "1002.3",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "107.9"
    },
    {
        "années": "1998",
        "NB_penitentiaires": "146",
        "NB_detention ": "6497",
        "Population_permanente": "7110",
        "NB_places": "91",
        "Effectif": "79",
        "occupation": "86.2",
        "detenus_releve": "5594",
        "detenus_releve_femmes": "351",
        "pourcent": "6.3",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1928",
        "execution_anticipée": "468",
        "exécution": "2754",
        "mesures_contrainte": "250",
        "autres": "194",
        "NB_entrees": "53.2",
        "détention_provisoire": "20.2",
        "exécution_anticipée": "1.1",
        "exécution2": "10.9",
        "mesures": "...",
        "autres_types": "21",
        "NB_journees": "2044.7",
        "detention_provisoire2": "633.5",
        "execution_anticipée2": "173.3",
        "exécution des peines et des mesures_5": "1078.2",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "...",
        "autres types de détention_7": "159.6"
    },
    {
        "années": "1999",
        "NB_penitentiaires": "144",
        "NB_detention ": "6571",
        "Population_permanente": "7144",
        "NB_places": "92",
        "Effectif": "82",
        "occupation": "89.5",
        "detenus_releve": "5884",
        "detenus_releve_femmes": "357",
        "pourcent": "6.1",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "2064",
        "execution_anticipée": "500",
        "exécution": "2756",
        "mesures_contrainte": "384",
        "autres": "180",
        "NB_entrees": "51.2",
        "détention_provisoire": "19.8",
        "exécution_anticipée": "1.1",
        "exécution2": "11.2",
        "mesures": "3.7",
        "autres_types": "15.5",
        "NB_journees": "2032.5",
        "detention_provisoire2": "651",
        "execution_anticipée2": "155",
        "exécution des peines et des mesures_5": "1082",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "87.7",
        "autres types de détention_7": "56.9"
    },
    {
        "années": "2000",
        "NB_penitentiaires": "145",
        "NB_detention ": "6694",
        "Population_permanente": "7184",
        "NB_places": "93",
        "Effectif": "79",
        "occupation": "84.6",
        "detenus_releve": "5662",
        "detenus_releve_femmes": "369",
        "pourcent": "6.5",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1811",
        "execution_anticipée": "565",
        "exécution": "2778",
        "mesures_contrainte": "333",
        "autres": "175",
        "NB_entrees": "47",
        "détention_provisoire": "17.8",
        "exécution_anticipée": "1.2",
        "exécution2": "9.9",
        "mesures": "3.6",
        "autres_types": "14.5",
        "NB_journees": "1925.7",
        "detention_provisoire2": "546.9",
        "execution_anticipée2": "145.3",
        "exécution des peines et des mesures_5": "1088.2",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "75.8",
        "autres types de détention_7": "57.3"
    },
    {
        "années": "2001",
        "NB_penitentiaires": "147",
        "NB_detention ": "6632",
        "Population_permanente": "7285",
        "NB_places": "91",
        "Effectif": "71",
        "occupation": "78.2",
        "detenus_releve": "5161",
        "detenus_releve_femmes": "320",
        "pourcent": "6.2",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1581",
        "execution_anticipée": "439",
        "exécution": "2821",
        "mesures_contrainte": "218",
        "autres": "102",
        "NB_entrees": "47.3",
        "détention_provisoire": "17.9",
        "exécution_anticipée": "1.1",
        "exécution2": "10.5",
        "mesures": "6.3",
        "autres_types": "11.5",
        "NB_journees": "1812.5",
        "detention_provisoire2": "528.5",
        "execution_anticipée2": "124.4",
        "exécution des peines et des mesures_5": "1038.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "83.4",
        "autres types de détention_7": "37.4"
    },
    {
        "années": "2002",
        "NB_penitentiaires": "129",
        "NB_detention ": "6367",
        "Population_permanente": "7343",
        "NB_places": "87",
        "Effectif": "67",
        "occupation": "78.1",
        "detenus_releve": "4937",
        "detenus_releve_femmes": "297",
        "pourcent": "6",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1500",
        "execution_anticipée": "500",
        "exécution": "2545",
        "mesures_contrainte": "295",
        "autres": "97",
        "NB_entrees": "50.2",
        "détention_provisoire": "19.2",
        "exécution_anticipée": "1",
        "exécution2": "11.1",
        "mesures": "6.6",
        "autres_types": "12.3",
        "NB_journees": "1822",
        "detention_provisoire2": "538.7",
        "execution_anticipée2": "129",
        "exécution des peines et des mesures_5": "1009.3",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "103.9",
        "autres types de détention_7": "41"
    },
    {
        "années": "2003",
        "NB_penitentiaires": "125",
        "NB_detention ": "6363",
        "Population_permanente": "7405",
        "NB_places": "86",
        "Effectif": "70",
        "occupation": "82.6",
        "detenus_releve": "5214",
        "detenus_releve_femmes": "297",
        "pourcent": "5.7",
        "detenus_releve_etrangers": "",
        "pourcent_1": "",
        "detention_provisoire": "1697",
        "execution_anticipée": "515",
        "exécution": "2604",
        "mesures_contrainte": "307",
        "autres": "91",
        "NB_entrees": "53.1",
        "détention_provisoire": "20.9",
        "exécution_anticipée": "1.3",
        "exécution2": "12.1",
        "mesures": "7.2",
        "autres_types": "11.6",
        "NB_journees": "1919.2",
        "detention_provisoire2": "624.5",
        "execution_anticipée2": "130.5",
        "exécution des peines et des mesures_5": "1006.5",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "119.7",
        "autres types de détention_7": "38"
    },
    {
        "années": "2004",
        "NB_penitentiaires": "125",
        "NB_detention ": "6484",
        "Population_permanente": "7454",
        "NB_places": "87",
        "Effectif": "80",
        "occupation": "92.2",
        "detenus_releve": "5977",
        "detenus_releve_femmes": "361",
        "pourcent": "6",
        "detenus_releve_etrangers": "4227",
        "pourcent_1": "70.7",
        "detention_provisoire": "1863",
        "execution_anticipée": "576",
        "exécution": "3030",
        "mesures_contrainte": "394",
        "autres": "114",
        "NB_entrees": "57",
        "détention_provisoire": "21.4",
        "exécution_anticipée": "1.1",
        "exécution2": "13.1",
        "mesures": "6.8",
        "autres_types": "14.6",
        "NB_journees": "2147.5",
        "detention_provisoire2": "684.2",
        "execution_anticipée2": "164",
        "exécution des peines et des mesures_5": "1114.4",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "140.8",
        "autres types de détention_7": "44.1"
    },
    {
        "années": "2005",
        "NB_penitentiaires": "120",
        "NB_detention ": "6584",
        "Population_permanente": "7501",
        "NB_places": "88",
        "Effectif": "82",
        "occupation": "93.2",
        "detenus_releve": "6137",
        "detenus_releve_femmes": "332",
        "pourcent": "5.4",
        "detenus_releve_etrangers": "4329",
        "pourcent_1": "70.5",
        "detention_provisoire": "1879",
        "execution_anticipée": "503",
        "exécution": "3291",
        "mesures_contrainte": "368",
        "autres": "96",
        "NB_entrees": "55.2",
        "détention_provisoire": "20.2",
        "exécution_anticipée": "1.6",
        "exécution2": "13.2",
        "mesures": "7.4",
        "autres_types": "12.7",
        "NB_journees": "2226.6",
        "detention_provisoire2": "658.4",
        "execution_anticipée2": "176.1",
        "exécution des peines et des mesures_5": "1214.6",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "133.7",
        "autres types de détention_7": "43.8"
    },
    {
        "années": "2006",
        "NB_penitentiaires": "119",
        "NB_detention ": "6736",
        "Population_permanente": "7558",
        "NB_places": "89",
        "Effectif": "78",
        "occupation": "87.4",
        "detenus_releve": "5888",
        "detenus_releve_femmes": "333",
        "pourcent": "5.7",
        "detenus_releve_etrangers": "4062",
        "pourcent_1": "69",
        "detention_provisoire": "1808",
        "execution_anticipée": "492",
        "exécution": "3226",
        "mesures_contrainte": "305",
        "autres": "57",
        "NB_entrees": "51.7",
        "détention_provisoire": "17.3",
        "exécution_anticipée": "1.2",
        "exécution2": "14",
        "mesures": "6.5",
        "autres_types": "12.7",
        "NB_journees": "2195.3",
        "detention_provisoire2": "658.9",
        "execution_anticipée2": "168.7",
        "exécution des peines et des mesures_5": "1210",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "125.3",
        "autres types de détention_7": "32.3"
    },
    {
        "années": "2007",
        "NB_penitentiaires": "115",
        "NB_detention ": "6665",
        "Population_permanente": "7619",
        "NB_places": "87",
        "Effectif": "75",
        "occupation": "85.7",
        "detenus_releve": "5715",
        "detenus_releve_femmes": "313",
        "pourcent": "5.5",
        "detenus_releve_etrangers": "3985",
        "pourcent_1": "69.7",
        "detention_provisoire": "1653",
        "execution_anticipée": "515",
        "exécution": "3083",
        "mesures_contrainte": "391",
        "autres": "73",
        "NB_entrees": "48.5",
        "détention_provisoire": "16.7",
        "exécution_anticipée": "1.4",
        "exécution2": "13.2",
        "mesures": "5.7",
        "autres_types": "11.2",
        "NB_journees": "2113.9",
        "detention_provisoire2": "619.3",
        "execution_anticipée2": "174.5",
        "exécution des peines et des mesures_5": "1125.3",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "136",
        "autres types de détention_7": "36.6"
    },
    {
        "années": "2008",
        "NB_penitentiaires": "117",
        "NB_detention ": "6737",
        "Population_permanente": "7711",
        "NB_places": "87",
        "Effectif": "75",
        "occupation": "85.8",
        "detenus_releve": "5780",
        "detenus_releve_femmes": "337",
        "pourcent": "5.8",
        "detenus_releve_etrangers": "4027",
        "pourcent_1": "69.7",
        "detention_provisoire": "1779",
        "execution_anticipée": "542",
        "exécution": "2878",
        "mesures_contrainte": "419",
        "autres": "162",
        "NB_entrees": "47.5",
        "détention_provisoire": "17",
        "exécution_anticipée": "1.5",
        "exécution2": "12.6",
        "mesures": "5.3",
        "autres_types": "11",
        "NB_journees": "2110.4",
        "detention_provisoire2": "649.2",
        "execution_anticipée2": "174.1",
        "exécution des peines et des mesures_5": "1081.7",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "145.4",
        "autres types de détention_7": "60"
    },
    {
        "années": "2009",
        "NB_penitentiaires": "113",
        "NB_detention ": "6655",
        "Population_permanente": "7801",
        "NB_places": "85",
        "Effectif": "78",
        "occupation": "91.7",
        "detenus_releve": "6101",
        "detenus_releve_femmes": "376",
        "pourcent": "6.2",
        "detenus_releve_etrangers": "4291",
        "pourcent_1": "70.3",
        "detention_provisoire": "1888",
        "execution_anticipée": "596",
        "exécution": "3007",
        "mesures_contrainte": "428",
        "autres": "182",
        "NB_entrees": "53.5",
        "détention_provisoire": "18.5",
        "exécution_anticipée": "1.5",
        "exécution2": "13",
        "mesures": "7.8",
        "autres_types": "12.7",
        "NB_journees": "2208.9",
        "detention_provisoire2": "691.3",
        "execution_anticipée2": "198.2",
        "exécution des peines et des mesures_5": "1102.7",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "155",
        "autres types de détention_7": "61.7"
    },
    {
        "années": "2010",
        "NB_penitentiaires": "114",
        "NB_detention ": "6662",
        "Population_permanente": "7878",
        "NB_places": "85",
        "Effectif": "78",
        "occupation": "92.8",
        "detenus_releve": "6181",
        "detenus_releve_femmes": "347",
        "pourcent": "5.6",
        "detenus_releve_etrangers": "4428",
        "pourcent_1": "71.6",
        "detention_provisoire": "1894",
        "execution_anticipée": "640",
        "exécution": "3131",
        "mesures_contrainte": "371",
        "autres": "145",
        "NB_entrees": "52.5",
        "détention_provisoire": "16.8",
        "exécution_anticipée": "1.5",
        "exécution2": "13.1",
        "mesures": "8",
        "autres_types": "13.1",
        "NB_journees": "2256",
        "detention_provisoire2": "703.1",
        "execution_anticipée2": "203.1",
        "exécution des peines et des mesures_5": "1142.4",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "145",
        "autres types de détention_7": "62.4"
    },
    {
        "années": "2011",
        "NB_penitentiaires": "111",
        "NB_detention ": "6869",
        "Population_permanente": "7912",
        "NB_places": "87",
        "Effectif": "77",
        "occupation": "88.3",
        "detenus_releve": "6065",
        "detenus_releve_femmes": "324",
        "pourcent": "5.3",
        "detenus_releve_etrangers": "4333",
        "pourcent_1": "71.4",
        "detention_provisoire": "1703",
        "execution_anticipée": "657",
        "exécution": "3151",
        "mesures_contrainte": "379",
        "autres": "175",
        "NB_entrees": "53",
        "détention_provisoire": "14.1",
        "exécution_anticipée": "1.9",
        "exécution2": "14.6",
        "mesures": "7.6",
        "autres_types": "14.8",
        "NB_journees": "2205.8",
        "detention_provisoire2": "630",
        "execution_anticipée2": "224.9",
        "exécution des peines et des mesures_5": "1137.7",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "140.4",
        "autres types de détention_7": "72.8"
    },
    {
        "années": "2012",
        "NB_penitentiaires": "109",
        "NB_detention ": "6978",
        "Population_permanente": "7992",
        "NB_places": "87",
        "Effectif": "83",
        "occupation": "94.6",
        "detenus_releve": "6599",
        "detenus_releve_femmes": "324",
        "pourcent": "4.9",
        "detenus_releve_etrangers": "4874",
        "pourcent_1": "73.9",
        "detention_provisoire": "2051",
        "execution_anticipée": "669",
        "exécution": "3281",
        "mesures_contrainte": "427",
        "autres": "171",
        "NB_entrees": "57.7",
        "détention_provisoire": "15.6",
        "exécution_anticipée": "2",
        "exécution2": "15.1",
        "mesures": "8.9",
        "autres_types": "16.1",
        "NB_journees": "2429.9",
        "detention_provisoire2": "727.8",
        "execution_anticipée2": "232.8",
        "exécution des peines et des mesures_5": "1243.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "149.7",
        "autres types de détention_7": "75.8"
    },
    {
        "années": "2013",
        "NB_penitentiaires": "106",
        "NB_detention ": "7009",
        "Population_permanente": "8085",
        "NB_places": "87",
        "Effectif": "87",
        "occupation": "100.6",
        "detenus_releve": "7054",
        "detenus_releve_femmes": "370",
        "pourcent": "5.2",
        "detenus_releve_etrangers": "5242",
        "pourcent_1": "74.3",
        "detention_provisoire": "2097",
        "execution_anticipée": "765",
        "exécution": "3657",
        "mesures_contrainte": "375",
        "autres": "160",
        "NB_entrees": "53.8",
        "détention_provisoire": "14.8",
        "exécution_anticipée": "1.9",
        "exécution2": "14.8",
        "mesures": "8.5",
        "autres_types": "13.8",
        "NB_journees": "2447.1",
        "detention_provisoire2": "749.1",
        "execution_anticipée2": "232.1",
        "exécution des peines et des mesures_5": "1268.1",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "132.2",
        "autres types de détention_7": "65.7"
    },
    {
        "années": "2014",
        "NB_penitentiaires": "113",
        "NB_detention ": "7216",
        "Population_permanente": "8184",
        "NB_places": "88",
        "Effectif": "85",
        "occupation": "95.9",
        "detenus_releve": "6923",
        "detenus_releve_femmes": "328",
        "pourcent": "4.7",
        "detenus_releve_etrangers": "5055",
        "pourcent_1": "73",
        "detention_provisoire": "1892",
        "execution_anticipée": "834",
        "exécution": "3688",
        "mesures_contrainte": "328",
        "autres": "181",
        "NB_entrees": "52.3",
        "détention_provisoire": "13.4",
        "exécution_anticipée": "2",
        "exécution2": "16",
        "mesures": "7.5",
        "autres_types": "13.3",
        "NB_journees": "2578.9",
        "detention_provisoire2": "702.1",
        "execution_anticipée2": "266.5",
        "exécution des peines et des mesures_5": "1416.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "127.6",
        "autres types de détention_7": "65.9"
    },
    {
        "années": "2015",
        "NB_penitentiaires": "112",
        "NB_detention ": "7324",
        "Population_permanente": "8280",
        "NB_places": "88",
        "Effectif": "83",
        "occupation": "94",
        "detenus_releve": "6884",
        "detenus_releve_femmes": "375",
        "pourcent": "5.4",
        "detenus_releve_etrangers": "4885",
        "pourcent_1": "71",
        "detention_provisoire": "1849",
        "execution_anticipée": "876",
        "exécution": "3673",
        "mesures_contrainte": "316",
        "autres": "170",
        "NB_entrees": "53.2",
        "détention_provisoire": "13.5",
        "exécution_anticipée": "2.1",
        "exécution2": "16.6",
        "mesures": "7.6",
        "autres_types": "13.5",
        "NB_journees": "2549.7",
        "detention_provisoire2": "655.1",
        "execution_anticipée2": "270.5",
        "exécution des peines et des mesures_5": "1438.5",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "120.9",
        "autres types de détention_7": "64.7"
    },
    {
        "années": "2016",
        "NB_penitentiaires": "111",
        "NB_detention ": "7483",
        "Population_permanente": "8364",
        "NB_places": "89",
        "Effectif": "82",
        "occupation": "91.9",
        "detenus_releve": "6878",
        "detenus_releve_femmes": "383",
        "pourcent": "5.6",
        "detenus_releve_etrangers": "4954",
        "pourcent_1": "72",
        "detention_provisoire": "1711",
        "execution_anticipée": "1032",
        "exécution": "3670",
        "mesures_contrainte": "319",
        "autres": "146",
        "NB_entrees": "53.2",
        "détention_provisoire": "13.6",
        "exécution_anticipée": "2.4",
        "exécution2": "16.9",
        "mesures": "7.9",
        "autres_types": "12.4",
        "NB_journees": "2541.6",
        "detention_provisoire2": "635.7",
        "execution_anticipée2": "290",
        "exécution des peines et des mesures_5": "1430.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "123",
        "autres types de détention_7": "62.1"
    },
    {
        "années": "2017",
        "NB_penitentiaires": "106",
        "NB_detention ": "7489",
        "Population_permanente": "8449",
        "NB_places": "89",
        "Effectif": "82",
        "occupation": "92.2",
        "detenus_releve": "6907",
        "detenus_releve_femmes": "382",
        "pourcent": "5.5",
        "detenus_releve_etrangers": "4935",
        "pourcent_1": "71.4",
        "detention_provisoire": "1681",
        "execution_anticipée": "1036",
        "exécution": "3732",
        "mesures_contrainte": "257",
        "autres": "201",
        "NB_entrees": "50.8",
        "détention_provisoire": "13.5",
        "exécution_anticipée": "2.4",
        "exécution2": "16.3",
        "mesures": "6.7",
        "autres_types": "12",
        "NB_journees": "2548.6",
        "detention_provisoire2": "655.5",
        "execution_anticipée2": "301.6",
        "exécution des peines et des mesures_5": "1433.3",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "98.1",
        "autres types de détention_7": "60.1"
    },
    {
        "années": "2018",
        "NB_penitentiaires": "104",
        "NB_detention ": "7529",
        "Population_permanente": "8509",
        "NB_places": "88",
        "Effectif": "82",
        "occupation": "92.6",
        "detenus_releve": "6972",
        "detenus_releve_femmes": "…",
        "pourcent": "…",
        "detenus_releve_etrangers": "…",
        "pourcent_1": "…",
        "detention_provisoire": "1843",
        "execution_anticipée": "980",
        "exécution": "3684",
        "mesures_contrainte": "284",
        "autres": "181",
        "NB_entrees": "51.6",
        "détention_provisoire": "13",
        "exécution_anticipée": "2.6",
        "exécution2": "17.1",
        "mesures": "6.3",
        "autres_types": "12.7",
        "NB_journees": "2545.7",
        "detention_provisoire2": "668",
        "execution_anticipée2": "334",
        "exécution des peines et des mesures_5": "1372.1",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "103.6",
        "autres types de détention_7": "68"
    },
    {
        "années": "2019",
        "NB_penitentiaires": "102",
        "NB_detention ": "7394",
        "Population_permanente": "8542",
        "NB_places": "87",
        "Effectif": "81",
        "occupation": "93.9",
        "detenus_releve": "6943",
        "detenus_releve_femmes": "396",
        "pourcent": "5.7",
        "detenus_releve_etrangers": "5009",
        "pourcent_1": "72.1",
        "detention_provisoire": "1867",
        "execution_anticipée": "1061",
        "exécution": "3549",
        "mesures_contrainte": "295",
        "autres": "171",
        "NB_entrees": "47.6",
        "détention_provisoire": "12.2",
        "exécution_anticipée": "2.7",
        "exécution2": "15.9",
        "mesures": "5.4",
        "autres_types": "11.5",
        "NB_journees": "2498.6",
        "detention_provisoire2": "693.8",
        "execution_anticipée2": "337.3",
        "exécution des peines et des mesures_5": "1314.6",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "99.1",
        "autres types de détention_7": "53.8"
    },
    {
        "années": "2020",
        "NB_penitentiaires": "98",
        "NB_detention ": "7373",
        "Population_permanente": "8604",
        "NB_places": "86",
        "Effectif": "80",
        "occupation": "93.5",
        "detenus_releve": "6897",
        "detenus_releve_femmes": "401",
        "pourcent": "5.8",
        "detenus_releve_etrangers": "4798",
        "pourcent_1": "69.6",
        "detention_provisoire": "1902",
        "execution_anticipée": "980",
        "exécution": "3583",
        "mesures_contrainte": "267",
        "autres": "165",
        "NB_entrees": "41.2",
        "détention_provisoire": "11.2",
        "exécution_anticipée": "2.4",
        "exécution2": "13.9",
        "mesures": "3.3",
        "autres_types": "10.5",
        "NB_journees": "2298.7",
        "detention_provisoire2": "657.1",
        "execution_anticipée2": "311.1",
        "exécution des peines et des mesures_5": "1220.3",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "63.1",
        "autres types de détention_7": "47.2"
    },
    {
        "années": "2021",
        "NB_penitentiaires": "92",
        "NB_detention ": "7397",
        "Population_permanente": "8667",
        "NB_places": "85",
        "Effectif": "73",
        "occupation": "85.4",
        "detenus_releve": "6316",
        "detenus_releve_femmes": "357",
        "pourcent": "5.7",
        "detenus_releve_etrangers": "4469",
        "pourcent_1": "70.8",
        "detention_provisoire": "1968",
        "execution_anticipée": "898",
        "exécution": "3215",
        "mesures_contrainte": "115",
        "autres": "120",
        "NB_entrees": "42.6",
        "détention_provisoire": "11.6",
        "exécution_anticipée": "2.4",
        "exécution2": "13.7",
        "mesures": "3.7",
        "autres_types": "11.2",
        "NB_journees": "2303.8",
        "detention_provisoire2": "672.4",
        "execution_anticipée2": "320.3",
        "exécution des peines et des mesures_5": "1211.9",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "51.4",
        "autres types de détention_7": "47.9"
    },
    {
        "années": "2022",
        "NB_penitentiaires": "91",
        "NB_detention ": "7341",
        "Population_permanente": "8737",
        "NB_places": "84",
        "Effectif": "72",
        "occupation": "86",
        "detenus_releve": "6310",
        "detenus_releve_femmes": "380",
        "pourcent": "6",
        "detenus_releve_etrangers": "4421",
        "pourcent_1": "70.1",
        "detention_provisoire": "1872",
        "execution_anticipée": "949",
        "exécution": "3217",
        "mesures_contrainte": "161",
        "autres": "111",
        "NB_entrees": "37.1",
        "détention_provisoire": "10.1",
        "exécution_anticipée": "2.5",
        "exécution2": "14.1",
        "mesures": "4",
        "autres_types": "6.4",
        "NB_journees": "2288.5",
        "detention_provisoire2": "670.7",
        "execution_anticipée2": "329.9",
        "exécution des peines et des mesures_5": "1192.8",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "57.4",
        "autres types de détention_7": "37.8"
    },
    {
        "années": "2023",
        "NB_penitentiaires": "89",
        "NB_detention ": "7196",
        "Population_permanente": "8813",
        "NB_places": "82",
        "Effectif": "73",
        "occupation": "89.6",
        "detenus_releve": "6445",
        "detenus_releve_femmes": "382",
        "pourcent": "5.9",
        "detenus_releve_etrangers": "4578",
        "pourcent_1": "71",
        "detention_provisoire": "1924",
        "execution_anticipée": "1026",
        "exécution": "3145",
        "mesures_contrainte": "145",
        "autres": "205",
        "NB_entrees": "…",
        "détention_provisoire": "…",
        "exécution_anticipée": "…",
        "exécution2": "…",
        "mesures": "…",
        "autres_types": "…",
        "NB_journees": "…",
        "detention_provisoire2": "…",
        "execution_anticipée2": "…",
        "exécution des peines et des mesures_5": "…",
        "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6": "…",
        "autres types de détention_7": "…"
    }];
datas.columns = [
    "années",
    "NB_penitentiaires",
    "NB_detention ",
    "Population_permanente",
    "NB_places",
    "Effectif",
    "occupation",
    "detenus_releve",
    "detenus_releve_femmes",
    "pourcent",
    "detenus_releve_etrangers",
    "pourcent_1",
    "detention_provisoire",
    "execution_anticipée",
    "exécution",
    "mesures_contrainte",
    "autres",
    "NB_entrees",
    "détention_provisoire",
    "exécution_anticipée",
    "exécution2",
    "mesures",
    "autres_types",
    "NB_journees",
    "detention_provisoire2",
    "execution_anticipée2",
    "exécution des peines et des mesures_5",
    "mesures de contrainte selon la loi fédérale sur les étrangers et l'intégration_6",
    "autres types de détention_7"
];

    // set the dimensions and margins of the graph
    var margin = { top: 70, right: 30, bottom: 70, left: 60 },
      width = 1080 - margin.left - margin.right,
      height = 800 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    // d3.csv("je-f-19.04.01.21_processed.csv").then(function (datas) {

      datas.columns.forEach((element, index) => {
        if (index != xIndex) {
          headers.push(element);
        }
      });

      var arrOptions = new Array();


      for (var i = 0; i < headers.length; i++) {
        arrOptions[i] = "option" + i;
      }

      for (var i = 0; i < arrOptions.length; i++) {
        var btnShow = document.createElement("input");
        btnShow.setAttribute("type", "button");
        btnShow.value = headers[i];

        let optionPar = datas.map(data => {

          let y = 0;
          if (Number(data[headers[i]])) {
            y = Number(data[headers[i]]);
          }

          return { x: data[datas.columns[xIndex]], y: y };
        });

        btnShow.onclick = function () {
          update(this.value, optionPar);
        }

        document.getElementById('divButtons').appendChild(btnShow);
      }

    // });

    // Initialize the X axis
    var x = d3.scaleBand()
      .range([0, width])
      .padding(0.2);
    var xAxis = svg.append("g")
      .attr("transform", "translate(0," + height + ")")

    // Initialize the Y axis
    var y = d3.scaleLinear()
      .range([height, 0]);
    var yAxis = svg.append("g")
      .attr("class", "myYaxis")


    // A function that create / update the plot for a given variable:
    function update(title, data) {
      
      document.getElementById("title").innerHTML  = '<h1>'+title+'</h1>';
      let maxIndex = Object.keys(data).reduce((a, b) => data[a].y > data[b].y ? a : b);
      let max = data[maxIndex].y;

      var color1 = "hsl(" + Math.random() * 360 + ",100%,50%)";
      var color2 = "hsl(" + Math.random() * 360 + ",100%,50%)";
      var color3 = "hsl(" + Math.random() * 360 + ",100%,50%)";

      // Update the X axis
      x.domain(data.map(function (d) { return d.x; }))
      xAxis.call(d3.axisBottom(x))

      // Update the Y axis
      y.domain([0, d3.max(data, function (d) { return d.y })]);
      yAxis.transition().duration(1000).call(d3.axisLeft(y));

      // Create the u variable
      var u = svg.selectAll("rect")
        .data(data)

      u
        .enter()
        .append("rect") // Add a new rect for each new elements
        .merge(u) // get the already existing elements as well
        .transition() // and apply changes to all of them
        .duration(1000)
        .attr("x", function (d) { return x(d.x); })
        .attr("y", function (d) { return y(d.y); })
        .attr("width", x.bandwidth())
        .attr("height", function (d) { return height - y(d.y); })
        .attr("fill", function (d, i) {
          if (d.y >= 0 && d.y < max / 3) {
            return color1;
          } else if (d.y >= max / 3 && d.y < 2 * max / 3) {
            return color2;
          } else {
            return color3;
          }
        });

      // If less group in the new dataset, I delete the ones not in use anymore
      u
        .exit()
        .remove();

    }

// Initialize the plot with the first dataset
// update(data1)

  </script>
</body>

</html>